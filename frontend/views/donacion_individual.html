<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Donaci√≥n Individual - Becas Con Prop√≥sito</title>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <!-- CSS Principal -->
    <link rel="stylesheet" href="../assets/style.css">
    <link rel="stylesheet" href="../assets/style_donacioni.css">
    <!-- CSS Componentes -->
    <link rel="stylesheet" href="../assets/nav_bar.css">
    
    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="../js/include-layout.js" defer></script>
    <script src="../js/donacion-individual.js" defer></script>
</head>
<body>
    <div id="app-header"></div>

    <main class="container page-container">
        <!-- Steps Indicator -->
        <div class="steps-indicator">
            <div class="step step--active">
                <div class="step__icon">‚úèÔ∏è</div>
                <span class="step__label">DISE√ëO</span>
            </div>
            <div class="step__line"></div>
            <div class="step">
                <div class="step__icon">üë§</div>
                <span class="step__label">DATOS</span>
            </div>
            <div class="step__line"></div>
            <div class="step">
                <div class="step__icon">üí≥</div>
                <span class="step__label">PAGO</span>
            </div>
        </div>

        <div class="certificate-builder">
            <!-- Left Column: Form -->
            <div class="builder__form">
                <h1 class="builder__title">Personaliza tu Certificado</h1>

                <!-- 1. Thematic Selection -->
                <section class="builder__section">
                    <h2 class="builder__subtitle">Elige la Causa</h2>
                    <div id="topics-container" class="topics-grid">
                        <!-- Buttons injected by JS -->
                        <p class="loading-text">Cargando causas...</p>
                    </div>

                    <!-- New: Specific Topic Selection -->
                    <div id="specific-topic-container" class="form-group hidden" style="margin-top: 20px;">
                        <label for="specific-topic-select" class="form-label">¬øDeseas apoyar un programa espec√≠fico? (Opcional)</label>
                        <select id="specific-topic-select" class="form-select">
                            <option value="">-- General (Sin preferencia) --</option>
                            <!-- Options injected by JS -->
                        </select>
                    </div>
                </section>

                <!-- 2. Visual Personalization -->
                <section class="builder__section">
                    <h2 class="builder__subtitle">Personalizaci√≥n Visual</h2>
                    <div class="upload-area" id="upload-area">
                        <input type="file" id="logo-upload" accept="image/png, image/jpeg, image/svg+xml" hidden>
                        <div class="upload-content">
                            <p class="upload-title">Sube tu Logo corporativo</p>
                            <p class="upload-subtitle">PNG, JPG hasta 5MB</p>
                        </div>
                    </div>
                    <p id="upload-error" class="error-msg hidden"></p>
                </section>

                <!-- 3. Message -->
                <section class="builder__section">
                    <h2 class="builder__subtitle">Mensaje del Certificado</h2>
                    <div class="form-group">
                        <label for="recipient-name" class="form-label">NOMBRE DEL DESTINATARIO</label>
                        <input type="text" id="recipient-name" class="form-input" placeholder="Ej. Juan P√©rez">
                    </div>
                    <div class="form-group">
                        <label for="personal-message" class="form-label">MENSAJE PERSONAL</label>
                        <textarea id="personal-message" class="form-input form-textarea" placeholder="Escribe una dedicatoria especial..."></textarea>
                    </div>
                </section>

                <!-- 4. Amount -->
                <section class="builder__section">
                    <h2 class="builder__subtitle">Monto de la Donaci√≥n</h2>
                    <select id="amount-select" class="form-select">
                        <option value="" disabled selected>Seleccione un monto</option>
                        <option value="2500">$2,500.00 MXN</option>
                        <option value="5000">$5,000.00 MXN</option>
                        <option value="7500">$7,500.00 MXN</option>
                        <option value="other">Otro Monto</option>
                    </select>
                    
                    <div id="custom-amount-container" class="form-group hidden" style="margin-top: 10px;">
                        <input type="number" id="custom-amount" class="form-input" placeholder="$ Ingrese el monto a donar" min="1" max="250000">
                        <p id="amount-error" class="error-msg hidden">El monto no puede exceder $250,000 MXN</p>
                    </div>

                    <!-- Checkbox para especificar beneficiario -->
                    <div class="form-group checkbox-group" style="margin-top: 15px;">
                        <input type="checkbox" id="specify-beneficiary">
                        <label for="specify-beneficiary">Quiero especificar un beneficiario</label>
                    </div>

                    <!-- Contenedor din√°mico para campos de beneficiario -->
                    <div id="beneficiary-fields-container" style="display: none; margin-top: 10px;">
                        <!-- Los campos se generar√°n din√°micamente con JS seg√∫n la causa seleccionada -->
                    </div>
                </section>
            </div>

            <!-- Right Column: Preview -->
            <div class="builder__preview">
                <div class="preview__header">
                    <span>VISTA PREVIA EN TIEMPO REAL</span>
                    <span class="preview__zoom">üîç</span>
                </div>
                <div class="certificate-preview-container">
                    <div class="certificate-preview" id="certificate-preview">
                        <!-- Certificate Content -->
                        <div class="cert__container">
                            <div class="cert__logo-area">
                                <img id="cert-logo" src="" alt="Logo" class="cert__logo">
                            </div>
                            <h2 class="cert__title">Certificado de<br>Generosidad</h2>
                            <p class="cert__subtitle">Este certificado reconoce que</p>
                            <h3 class="cert__recipient" id="cert-recipient">[Nombre del Destinatario]</h3>
                            <p class="cert__text">
                                Ha realizado una valiosa donaci√≥n para apoyar las <strong id="cert-cause-name">Becas</strong>
                            </p>
                            <div class="cert__signature-line"></div>
                        </div>
                    </div>
                </div>
                <p class="preview__note">‚ÑπÔ∏è Este certificado es una representaci√≥n visual. El documento oficial ser√° enviado por correo.</p>
            </div>
        </div>
    </main>
    
    <div class="sticky-footer">
        <div class="container sticky-footer__content">
            <div class="donation-total">
                <span class="total-label">TOTAL DE DONACI√ìN</span>
                <span class="total-amount" id="total-display">$0.00 <small>MXN</small></span>
            </div>
            <div class="footer-actions">
                <button type="button" class="btn-cancel" onclick="window.history.back()">Cancelar</button>
                <button type="button" id="btn-continue" class="btn-continue" disabled>Continuar a datos de env√≠o ‚ûî</button>
            </div>
        </div>
    </div>

    <div id="app-footer"></div>
</body>
</html>